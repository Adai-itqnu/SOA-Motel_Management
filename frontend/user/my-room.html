<!DOCTYPE html>
<html class="light" lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Phòng của tôi - Motel Management</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
    />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#ea2a33",
              "bg-soft": "#f8f6f6",
              surface: "#ffffff",
            },
            fontFamily: {
              display: ["Be Vietnam Pro", "sans-serif"],
              body: ["Be Vietnam Pro", "sans-serif"],
            },
            boxShadow: {
              card: "0 15px 50px rgba(16,24,40,0.08)",
              glow: "0 20px 45px rgba(234,42,51,0.22)",
            },
          },
        },
      };
    </script>
    <style>
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      ::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #94a3b8;
      }
      .dropdown-menu {
        opacity: 0;
        visibility: hidden;
        transform: translateY(-6px);
        transition: all 0.18s ease;
      }
      .dropdown-menu.show {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }
      .nav-tab.active {
        background: #ea2a33;
        color: #fff;
      }
    </style>
  </head>
  <body
    class="bg-bg-soft text-gray-900 font-display min-h-screen flex flex-col"
  >
    <!-- Header placeholder - will be replaced by layout.js -->
    <div id="layout-header"></div>

    <!-- Main Content -->
    <main
      class="flex-1 max-w-[1280px] w-full mx-auto px-4 sm:px-6 lg:px-8 py-8 flex flex-col gap-8"
    >
      <!-- Loading State -->
      <div id="loading" class="text-center py-20">
        <div
          class="inline-block animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"
        ></div>
        <p class="text-gray-500 mt-4">Đang tải thông tin...</p>
      </div>

      <!-- No Room State -->
      <div id="noRoom" class="hidden text-center py-20">
        <div
          class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6"
        >
          <span class="material-symbols-outlined text-6xl text-gray-400"
            >home_work</span
          >
        </div>
        <h2 class="text-2xl font-bold text-gray-800 mb-2">
          Bạn chưa thuê phòng nào
        </h2>
        <p class="text-gray-500 mb-6">Hãy tìm và đặt phòng phù hợp với bạn</p>
        <a
          href="/user/home.html"
          class="inline-block px-6 py-3 bg-primary text-white rounded-xl font-semibold hover:shadow-glow transition"
        >
          Tìm phòng ngay →
        </a>
      </div>

      <!-- Room Content -->
      <div id="roomContent" class="hidden space-y-8">
        <!-- Page Heading & Actions -->
        <div
          class="flex flex-col md:flex-row md:items-end justify-between gap-4"
        >
          <div>
            <div class="flex items-center gap-2 text-sm text-gray-500 mb-2">
              <a href="/user/home.html" class="hover:text-primary">Trang chủ</a>
              <span class="material-symbols-outlined text-[16px]"
                >chevron_right</span
              >
              <span class="text-primary font-medium">Phòng của tôi</span>
            </div>
            <h1
              id="pageTitle"
              class="text-3xl md:text-4xl font-black tracking-tight text-gray-900"
            >
              Phòng của tôi
            </h1>
            <p class="text-gray-500 mt-1">
              Quản lý thông tin thuê phòng và lịch sử thanh toán
            </p>
          </div>
          <div class="flex gap-3">
            <button
              onclick="reportIssue()"
              class="flex items-center gap-2 px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-medium hover:bg-gray-50 transition shadow-sm"
            >
              <span class="material-symbols-outlined text-[18px]"
                >report_problem</span
              >
              Báo cáo sự cố
            </button>
            <button
              onclick="window.location.href='/user/bills.html'"
              class="flex items-center gap-2 px-4 py-2 bg-primary hover:bg-red-700 text-white rounded-lg text-sm font-bold shadow-lg shadow-primary/30 transition-all"
            >
              <span class="material-symbols-outlined text-[18px]"
                >payments</span
              >
              Thanh toán ngay
            </button>
          </div>
        </div>

        <!-- Dashboard Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <!-- Left Column: Room Details & History -->
          <div class="lg:col-span-2 space-y-6">
            <!-- Room Hero Card -->
            <div
              class="bg-white rounded-xl shadow-card border border-gray-100 overflow-hidden"
            >
              <div class="relative h-64 md:h-80 w-full group">
                <img
                  id="roomImage"
                  src="/assets/images/room-placeholder.svg"
                  alt="Room"
                  class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                />
                <div class="absolute top-4 right-4">
                  <span
                    id="roomStatusBadge"
                    class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-green-500/90 text-white text-sm font-bold backdrop-blur-sm shadow-sm"
                  >
                    <span
                      class="size-2 bg-white rounded-full animate-pulse"
                    ></span>
                    <span id="roomStatusText">Đang thuê</span>
                  </span>
                </div>
                <div
                  class="absolute bottom-0 inset-x-0 bg-gradient-to-t from-black/80 to-transparent p-6"
                >
                  <div
                    class="flex flex-col md:flex-row md:items-end justify-between gap-2"
                  >
                    <div>
                      <p
                        id="roomDescription"
                        class="text-white/90 text-sm font-medium mb-1"
                      >
                        Căn hộ dịch vụ
                      </p>
                      <p class="text-white text-2xl font-bold">
                        <span id="roomPrice">0</span>đ<span
                          class="text-sm font-normal text-white/80"
                          >/tháng</span
                        >
                      </p>
                    </div>
                    <div class="flex gap-4 text-white/90 text-sm">
                      <span class="flex items-center gap-1"
                        ><span class="material-symbols-outlined text-[18px]"
                          >square_foot</span
                        >
                        <span id="roomArea">--</span>m²</span
                      >
                      <span class="flex items-center gap-1"
                        ><span class="material-symbols-outlined text-[18px]"
                          >layers</span
                        >
                        <span id="roomFloorInfo">--</span></span
                      >
                      <span class="flex items-center gap-1"
                        ><span class="material-symbols-outlined text-[18px]"
                          >bed</span
                        >
                        <span id="roomBeds">--</span></span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Amenities Section -->
            <div
              class="bg-white rounded-xl shadow-card border border-gray-100 p-6"
            >
              <div class="flex items-center gap-2 mb-4">
                <span class="material-symbols-outlined text-primary"
                  >featured_seasonal_and_gifts</span
                >
                <h3 class="text-lg font-bold">Tiện nghi phòng</h3>
              </div>
              <div id="amenitiesList" class="flex flex-wrap gap-3">
                <span class="text-gray-500 text-sm">Đang tải...</span>
              </div>
            </div>

            <!-- Payment History -->
            <div
              class="bg-white rounded-xl shadow-card border border-gray-100 overflow-hidden flex flex-col"
            >
              <div
                class="p-6 border-b border-gray-100 flex justify-between items-center"
              >
                <div class="flex items-center gap-2">
                  <span class="material-symbols-outlined text-primary"
                    >receipt_long</span
                  >
                  <h3 class="text-lg font-bold">Lịch sử thanh toán</h3>
                </div>
                <a
                  href="/user/bills.html"
                  class="text-sm text-primary font-medium hover:underline"
                  >Xem tất cả</a
                >
              </div>
              <div class="overflow-x-auto">
                <table class="w-full text-left text-sm">
                  <thead class="bg-gray-50 text-gray-500 font-medium">
                    <tr>
                      <th class="px-6 py-4">Kỳ thanh toán</th>
                      <th class="px-6 py-4">Loại phí</th>
                      <th class="px-6 py-4">Tổng tiền</th>
                      <th class="px-6 py-4">Hạn thanh toán</th>
                      <th class="px-6 py-4 text-right">Trạng thái</th>
                    </tr>
                  </thead>
                  <tbody id="paymentsList" class="divide-y divide-gray-100">
                    <tr>
                      <td
                        colspan="5"
                        class="px-6 py-8 text-center text-gray-500"
                      >
                        Đang tải lịch sử thanh toán...
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Right Column: Contract & Contact -->
          <div class="lg:col-span-1 space-y-6">
            <!-- Contract Info Card -->
            <div
              class="bg-white rounded-xl shadow-card border border-gray-100 p-6"
            >
              <div class="flex items-center justify-between mb-6">
                <div class="flex items-center gap-2">
                  <span class="material-symbols-outlined text-primary"
                    >description</span
                  >
                  <h3 class="text-lg font-bold">Hợp đồng thuê</h3>
                </div>
                <span
                  id="contractStatusBadge"
                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200"
                >
                  Đang hiệu lực
                </span>
              </div>
              <div id="contractInfo" class="space-y-4">
                <div
                  class="flex justify-between items-center py-2 border-b border-gray-50"
                >
                  <span class="text-gray-500 text-sm">Ngày bắt đầu</span>
                  <span id="contractStart" class="font-medium text-sm">--</span>
                </div>
                <div
                  class="flex justify-between items-center py-2 border-b border-gray-50"
                >
                  <span class="text-gray-500 text-sm">Ngày kết thúc</span>
                  <span id="contractEnd" class="font-medium text-sm">--</span>
                </div>
                <div
                  class="flex justify-between items-center py-2 border-b border-gray-50"
                >
                  <span class="text-gray-500 text-sm">Ngày đóng tiền</span>
                  <span id="contractPayDay" class="font-medium text-sm"
                    >--</span
                  >
                </div>
                <div class="pt-2">
                  <span
                    class="text-gray-500 text-xs uppercase tracking-wider font-semibold"
                    >Tiền cọc đang giữ</span
                  >
                  <div
                    id="contractDeposit"
                    class="text-2xl font-black text-primary mt-1"
                  >
                    0đ
                  </div>
                </div>
              </div>
              <button
                onclick="downloadContract()"
                class="w-full mt-6 flex items-center justify-center gap-2 px-4 py-2 bg-gray-50 hover:bg-gray-100 text-gray-900 rounded-lg text-sm font-bold transition-colors"
              >
                <span class="material-symbols-outlined text-[18px]"
                  >download</span
                >
                Tải hợp đồng PDF
              </button>
            </div>

            <!-- Landlord Contact Card -->
            <div
              class="bg-white rounded-xl shadow-card border border-gray-100 p-6"
            >
              <h3 class="text-lg font-bold mb-4">Quản lý tòa nhà</h3>
              <div id="landlordInfo" class="flex items-center gap-4 mb-6">
                <div
                  id="landlordAvatar"
                  class="size-12 rounded-full bg-gray-200 bg-cover bg-center"
                ></div>
                <div>
                  <p id="landlordName" class="font-bold text-gray-900"></p>
                  <p id="landlordRole" class="text-sm text-gray-500">Quản lý</p>
                </div>
              </div>
              <div class="grid grid-cols-2 gap-3">
                <button
                  onclick="callLandlord()"
                  class="flex items-center justify-center gap-2 px-3 py-2 bg-primary/10 hover:bg-primary/20 text-primary rounded-lg text-sm font-bold transition-colors"
                >
                  <span class="material-symbols-outlined text-[18px]"
                    >call</span
                  >
                  Gọi điện
                </button>
                <button
                  onclick="messageLandlord()"
                  class="flex items-center justify-center gap-2 px-3 py-2 bg-gray-50 hover:bg-gray-100 text-gray-900 rounded-lg text-sm font-bold transition-colors"
                >
                  <span class="material-symbols-outlined text-[18px]"
                    >chat</span
                  >
                  Nhắn tin
                </button>
              </div>
            </div>

            <!-- Building Rules Promo -->
            <div
              class="bg-gradient-to-br from-gray-900 to-gray-800 rounded-xl p-6 text-white shadow-lg relative overflow-hidden group"
            >
              <div
                class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity"
              >
                <span
                  class="material-symbols-outlined text-9xl transform rotate-12 translate-x-4 -translate-y-4"
                  >gavel</span
                >
              </div>
              <h3 class="text-lg font-bold mb-2 relative z-10">
                Nội quy tòa nhà
              </h3>
              <p
                class="text-sm text-gray-300 mb-4 relative z-10 leading-relaxed"
              >
                Vui lòng tuân thủ quy định về giờ giấc, vệ sinh chung và an ninh
                trật tự.
              </p>
              <a
                href="#"
                class="inline-flex items-center gap-1 text-sm font-bold text-white hover:text-primary transition-colors relative z-10"
              >
                Xem chi tiết
                <span class="material-symbols-outlined text-[16px]"
                  >arrow_forward</span
                >
              </a>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer placeholder - will be replaced by layout.js -->
    <div id="layout-footer"></div>

    <script src="/assets/js/common.js"></script>
    <script src="/assets/js/user/layout.js"></script>
    <script src="/assets/js/user/my-room.js"></script>
  </body>
</html>
